<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="refresh" content="300; url='/timeOutMessage.html'" />
    <title>Verification Page</title>
    <script type="text/javascript" src="signin.js" defer></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/verificationPage.css">
</head>

<body style="background-color:lightgrey; position:relative; top:3rem; font-family: Arial, Helvetica, sans-serif;">
    <div class="container-fluid">
        <div class="row justify-content-center ">
            <div style="width: 80%" class="col-md-8">
                <br>
                <br>
                <br>

                <a href="/forgotPassword">
                    <button class="btn " style="float: left; background-color: transparent">
                        <img src="/imageFiles/back.png" alt="backIcon" width="45px" height="45px"> 
                        <br>
                        Back to forgot passowrd</button></a>
                    </a>
            </div>
                

           
            <div class="col-md-6" style="padding: 20px">
        

                <h2 class="text-center font-weight-bold">Verification Page</h2>
                <form action="/submitOTP" method="post">
                    <div>
                        <input id="uid" name="uid" th:value="${uid}" hidden>
                    </div>
                    <div>
                        <input id="verificationCode" name="verificationCode" th:value="${verificationCode}" hidden>
                    </div>
                    <br>
                    

                    <!-- <p style="font-size: 20px;">Enter New Password</p> -->
                    <p style="color: rgb(50, 48, 48); font-size: 20px">Your one time verification code has been sent to your email. Please enter code below.</p>
                    <input type="text" id="code" name="code" placeholder="Enter here" required>
                    <p style="color: red;" name="wrongCode" th:text="${wrongCode}"></p>
                    
                    <div class="text-center justify-content-center d-inline">
                        <p id="timer">Time Remaining: 05:00</p>
                    </div>
                
                    <script type="text/javascript">
                        var minute = 4;
                        var second = 59;

                        setInterval(function(){
                            if(minute == 0 && second == 1){
                                document.getElementById("timer").innerHTML = "00:00";
                            }
                            else{
                                second--;
                                if (second == 0){
                                    minute--;
                                    second = 60;


                                    if(minute == 0){
                                        minute = minute;
                                    }
                                }
                                if(minute.toString().length == 1){
                                    minute = "0"+minute;
                                }
                                if(second.toString().length == 1){
                                    second = "0"+second;
                                }

                                document.getElementById("timer").innerHTML = "Time Remaining: " + minute + ":" + second;

                            }
                        },1000);
                    </script>
    
                    <br>


                    <p class="text-center">
                        <input id="submit" type="submit" class="btn rounded-0" style="float:center; justify-content:center" value="Send"> 
                    </p>
                   
                </form>

                <br>

                <div class="text-center justify-content-center">
                    <form action="/forgotPassword" method="post">
                        <div>
                            <input id="email" name="email" th:value="${email}" hidden>
                        </div>

                        <input id="submit" type="submit" style="float:center; justify-content:center; background-color: transparent; color: grey; border: transparent; font-size: 15px; width: 100%" value="Didn't receive an email yet? Resend code."> 
                    </form>
                    <!-- <a style="color: grey" class="btn rounded-0" th:href="@{/resendCode}">Didn't receive an email yet? Resend code. </a> -->
                    <br>
    
                </div>
            </div>
        </div>
    </div>

</body>


</html>
